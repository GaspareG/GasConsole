<html>
	<head>
		<title>Game2</title>
		<style>
			body {
				margin: 0px ;
				padding: 0px ;
				background: #ccc ;
			}

			#canvas { 
				width: 1000px ;
				height: 500px ;
			}
		</style>
	</head>	
	<body>
		<canvas height="500px" width="1000px" id="canvas"></canvas>
		<script>

			// Variabili Globali
			var canvas   = document.getElementById("canvas");
			var ctx      = canvas.getContext("2d");
			var width    = 1000 ;
			var height   = 500 ;
			var point    = [0,0] ;
			var position = [width/2,height/2] ;
			var angle    = 0  ;
			var radius   = 25 ;
			var online   = false;
			var player   = 0 ;
			var velocity = [10,10] ;

			document.addEventListener("DOMContentLoaded",function(){

				// Connessione WebSocket
                        	var wsServer = new WebSocket("ws://88.198.124.71:6060");
                        	var wsReady = false ;

                        	wsServer.onopen = function(){
                                	wsServer.send("SERVER");
       	                        	wsReady = true ;
	                        };

				// Parsing Input
				wsServer.onmessage = function(event){
					var data = JSON.parse(event.data);
					var player = Math.min(1,data.length);

					if( data[0] == null || data[0].offline == null )
					{
						online = false ;
						return;
					}

					online = !data[0].offline ;
					if(!online) return;

					switch(data[i].controller)
					{
						case "wheel":
							//position[i] = data[i].wheel.direction.vel ;
						break;
						case "analog":
							//var potY = Math.sin(data[i].analog.left.deg*Math.PI/180)*4 ;
                                               		//position[i] -= potY ;
						break;
						case "classic":
	                                               	//var dir = 0 ;
                                               		//if( data[i].classic.direction.top ) dir = +1 ;
                                               		//else if( data[i].classic.direction.down ) dir = -1 ;
							//position[i] -= 4*dir ;
						break ;
					}	
									
				};
				
				// Refresh Gioco
				var update = setInterval(function(){

					// Pulisco 
					ctx.fillStyle = "black";
 					ctx.fillRect(0,0,width,height);
				
					// Cursore
					ctx.fill
					ctx.rotate(angle*Math.PI/180);
										
					ctx.rotate(0);

				},35);
		
			});				
		</script>
	</body>
</html>
